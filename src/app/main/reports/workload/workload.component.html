<div class="row">
  <div class="card-body pb-1">
    <div class="col-md-12 col-12 d-flex justify-content-start justify-content-md-end">
      <form class="form-inline">
        <div class="form-group">
          <div class="input-group w-0">
            <input name="datepicker" class="form-control" ngbDatepicker #datepicker="ngbDatepicker"
              [autoClose]="'outside'" (dateSelect)="onDateSelection($event)" [displayMonths]="2"
              [dayTemplate]="rangeSelectionDP" [maxDate]="maxDate" outsideDays="hidden" [startDate]="fromDate!" />
            <ng-template #rangeSelectionDP let-date let-focused="focused">
              <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
                [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
                (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        <div class="input-group">
          <input class="form-control" placeholder="{{ basicDPdata }}" [maxDate]="maxtodayDate" name="selectDate"
            [(ngModel)]="basicDPdata" ngbDatepicker #basicDP="ngbDatepicker" readonly />
          <div class="input-group-append">
            <button class="btn btn-outline-secondary feather icon-calendar" (click)="basicDP.toggle()" type="button"
              rippleEffect></button>
          </div>
        </div>
        <button class="btn btn-primary ml-1 round" (click)="searchData(basicDPdata)" rippleEffect
          [disabled]="!basicDPdata">
          <i data-feather="plus" class="d-sm-none d-inline-block mr-0 mr-sm-1"></i>
          <span class="d-none d-sm-inline-block">Search</span>
        </button>
      </form>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-5 col-12">
    <div class="d-flex align-items-center">
      <label class="d-flex align-items-center">Show
        <select class="form-control mx-25" [(ngModel)]="selectedOption" (change)="selectDropdown(selectedOption)">
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>
      </label>
      <div ngbDropdown class="reportFilter" #reportFilter="ngbDropdown">
        <button class="cursor-pointer more-options-dropdown btn btn-outline-secondary hide-arrow" 
          role="button" ngbTooltip="Filters" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ngbDropdownToggle>
          <i data-feather="filter"></i>
        </button>
        <div ngbDropdownMenu aria-labelledby="dropdownFilter" class="p-0">
          <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right item-options-menu p-1" aria-labelledby="dropdownMenuButton">
            <div class="d-flex align-items-center justify-content-between">
              <h5 class="font-bold mb-0">Filters</h5>
              <button type="button" class="btn btn-icon btn-icon rounded-circle p-0" rippleEffect (click)="reportFilter.close()">
                <i data-feather="x"></i>
              </button>
            </div>
            <div class="dropdown-divider my-1"></div>
            <form class="form">
              <div class="form-row d-block mx-auto">
                <div class="form-group">
                  <label class="form-label">Department</label>
                  <ng-select [items]="userDepartment" bindLabel="name" placeholder="Department" name="department"
                    [(ngModel)]="department" #FBilingTypeRef="ngModel">
                  </ng-select>
                </div>
              </div>
              <div class="dropdown-divider my-1"></div>
              <div class="d-flex justify-content-between">
                <button type="reset" class="btn btn-outline-danger btn-apply-changes" rippleEffect
                  (click)="resetFilter(); reportFilter.close()">
                  Reset
                </button>
                <button type="submit" class="btn btn-outline-primary btn-apply-changes" rippleEffect
                  (click)="applyFilter(); reportFilter.close()">
                  Apply
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-7 col-12 d-flex justify-content-start justify-content-md-end">
    <div class="d-flex align-items-center justify-content-end pr-1 pb-1 pb-md-0 mb-1">
      <label class="d-flex align-items-center pr-1 pb-1 pb-md-0">
        Search <input [(ngModel)]="searchValue" name="searchValue" type="search" class="form-control ml-25"
          (search)="filterUpdate($event)" (keyup)="filterUpdate($event)" />
      </label>
      <a class="btn btn-outline-secondary float-right ml-1 mb-0" ngbTooltip="Export" (click)="exportReport()" rippleEffect><span [data-feather]="'download'"></span></a>
    </div>
  </div>
</div>
<!-- Collapse button start -->
<!-- <section id="collapsible">
  <div class="row">
    <div class="col-sm-12">
      <div class="card-body">
        <div class="faq_title">
          <span>Users</span>
          <span class="hours">hours</span>
        </div>
        <div *ngFor="let data of workloadDetails;let i = index">
          <div class="faq_ques" (click)="getData(data)" [attr.aria-expanded]="!data.isCollapsed"
            aria-controls="collapseExample4" rippleEffect>
            <span class="question">{{data.UserName}} </span>
            <span class="text_wrap">
              <span class="time text-danger">{{data.TotalTimeSpentByUser}}</span>
              <i class="fa fa-plus-circle" aria-hidden="true" *ngIf="data.isCollapsed"></i>
              <i class="fa fa-minus-circle" aria-hidden="true" *ngIf="!data.isCollapsed"></i>
            </span>
          </div>
          <div [ngbCollapse]="data.isCollapsed">
            <div class="card mb-0 ques_body">
              <ngx-datatable [rows]="rows" [rowHeight]="50" class="bootstrap core-bootstrap" [limit]="selectedOption"
                [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50" [scrollbarH]="true">
                <ngx-datatable-column name="CPA" prop="CPAName" [width]="150"
                  [resizeable]="false"></ngx-datatable-column>
                <ngx-datatable-column name="Client" prop="ClientName" [width]="150" [resizeable]="false">
                </ngx-datatable-column>
               </ngx-datatable>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->
<!-- <div class="row"> -->
<!-- <div class="col-md-6 col-12">
      <div class="d-flex justify-content-between align-items-center m-1">
        <label class="d-flex align-items-center css_page_dropdown"><span class="label">Per Page </span>
          <select class="form-control mx-25 border-0" [(ngModel)]="selectedOption">
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </label>
      </div>
    </div>
  </div>  -->
<!-- </section> -->
<!-- START CODE : AKSHAT MEHTA  -->
<!-- <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0" class="workloadAccheader">
  <ngb-panel>
    <ng-template ngbPanelTitle>
      <span class="lead collapse-title">
        <span class="lead collapse-title">
          <div class="custom-header-parent">
            <div class="custom-user-name">User Name</div>
            <div class="custom-role-type">Role Type</div>
            <div class="custom-std-time">Std Time</div>
            <div class="custom-total-time">Total Time</div>
          </div>
        </span>
      </span>
    </ng-template>
  </ngb-panel>
</ngb-accordion>
<ng-container *ngTemplateOutlet="recursiveListTmpl; context:{ list: rows }"></ng-container>
<ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0" class="workloadAcc" style="display: none;">
  <ngb-panel>
    <ng-template ngbPanelContent #recursiveListTmpl let-list="list">
      <ngb-accordion #acc="ngbAccordion" activeIds="ngb-panel-0" class="workloadAcc">
        <ngb-panel *ngFor="let item of list">
          <ng-template ngbPanelTitle>
            <span class="lead collapse-title">
              <div class="custom-header-parent">
                <div class="custom-icon">
                  <div class="custom-acc-icon"></div>
                </div>
                <div class="custom-user-name">{{item.Parent.UserName}}</div>
                <div class="custom-role-type">{{item.Parent.RoleType}}</div>
                <div class="custom-total-time">{{item.Parent.TotalTimeOfUser}}</div>
                <div class="custom-std-time">{{item.Parent.TotalTimeSpentByUser}}</div>
              </div>
            </span>
          </ng-template>
          <ng-template ngbPanelContent>
            <span class="lead collapse-title">
              <ng-container *ngTemplateOutlet="recursiveListTmpl; context:{ list: item.Children }">
              </ng-container>
            </span>
          </ng-template>
        </ngb-panel>
      </ngb-accordion>
    </ng-template>
  </ngb-panel>
</ngb-accordion> -->
<!-- START CODE : PRAPTI DALWADI  -->
<ngx-datatable #tableRowDetails [rows]="rows" [rowHeight]="50" class="bootstrap core-bootstrap" [count]="totalElements"
  [offset]="Number" [limit]="selectedOption" [externalPaging]="true" (page)="setPage($event)"
  [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50" [scrollbarH]="true">
  <ngx-datatable-column name="User Name" prop="UserName" [width]="200">
    <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
      <div class="d-flex align-items-center">
        <div class="cell-line-height">
          <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">{{ row.UserName }}</p>
          <span class="text-muted font-small-2"> {{ row.DepartmentName }}</span>
        </div>
      </div>
    </ng-template>
  </ngx-datatable-column>
  <ngx-datatable-column name="Designation" prop="RoleType" [width]="150"></ngx-datatable-column>
  <ngx-datatable-column name="Std Time" prop="TotalTimeOfUser" [width]="120"></ngx-datatable-column>
  <ngx-datatable-column name="Total Time" prop="TotalTimeSpentByUser" [width]="120"></ngx-datatable-column>
  <ngx-datatable-column [width]="10" [sortable]="false">
    <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
      <a title="Expand/Collapse Row">
        <span class="text_wrap">
          <i class="fa fa-plus-circle" (click)="rowDetailsToggleExpand(row)" *ngIf="!row.expanded"></i>
          <i class="fa fa-minus-circle" (click)="closeCollapse(row)" *ngIf="row.expanded"></i>
        </span>
      </a>
    </ng-template>
    <ngx-datatable-row-detail [rowHeight]="'auto'">
      <ng-template let-row="row" let-expanded="row.expanded" ngx-datatable-row-detail-template>
        <div>
          <div class="card mb-0 ques_body">
            <ngx-datatable [rows]="dataOflogs" [rowHeight]="'auto'" class="bootstrap core-bootstrap wordwrapbody"
              [limit]="selectedOption" [columnMode]="ColumnMode.force" [headerHeight]="50" [footerHeight]="50"
              [scrollbarH]="true">
              <ngx-datatable-column name="Created Date" prop="date" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Client" prop="CPAName" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Project" prop="ClientName" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Task/Process" prop="TaskName" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Sub Process" prop="SubProcessName" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Is Manual" prop="isManual" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Qty" prop="Quantity" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Std Time" prop="TotalTime" [width]="150"></ngx-datatable-column>
              <ngx-datatable-column name="Total Time" prop="TotalSpent" [width]="150"></ngx-datatable-column>
              
              <ngx-datatable-column name="Reviewer Status" prop="ReviewerStatus" [width]="150"></ngx-datatable-column>
            </ngx-datatable>
          </div>
        </div>
      </ng-template>
    </ngx-datatable-row-detail>
  </ngx-datatable-column>
</ngx-datatable>
<!-- END CODE : PRAPTI DALWADI  -->
<block-ui> </block-ui>