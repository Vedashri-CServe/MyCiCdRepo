<div class="slideout-content">
  <div class="modalsd modal-slide-in sdfade new-user-modal" id="modals-slide-in">
    <div class="modal-dialog">
      <form class="add-new-user modal-content pt-0" (ngSubmit)="(newProcessForm.form.valid)" #newProcessForm="ngForm">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"
          (click)="toggleSidebar('add-process')">×</button>
        <div class="modal-header mb-1">
          <h5 class="modal-title">{{!isEdit ? 'Add Process' : 'Edit Process'}}</h5>
        </div>
        <div class="modal-body flex-grow-1 px-3">
          <div class="processSelectBox d-flex form-group align-items-end">
            <div class="processSelect">
              <label class="form-label">Select Process</label>
              <ng-select [items]="processList" bindLabel="name" [(ngModel)]="process" (change)="changeFn(process)" name="process" #FProcessRef="ngModel" required>
                <ng-template ng-label-tmp let-item="item" let-clear="clear">
                  <span class="ng-value-label"> {{ item.name }}</span>
                  <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                </ng-template>
              </ng-select>
              <span *ngIf="newProcessForm.submitted && FProcessRef.invalid" class="invalid-form">
                <small class="form-text text-danger" *ngIf="FProcessRef.errors.required">This field is required!</small>
              </span>
            </div>
            <div class="activity-btn-css"  *ngIf="!isEdit">
              <button type="button" class="btn btn-icon btn-primary round" ngbTooltip="Add new Process" placement="left" (click)="addFiled()" rippleEffect>
                <i class="size-18" data-feather="plus" [size]="20"></i>
              </button>
            </div>
          </div>
          <div class="processSelectBox d-flex form-group align-items-end" *ngIf="isShow">
            <div class="processSelect">
              <label>Process</label>
              <input class="form-control" type="text"
                oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')" placeholder="Add new Proces"
                name="processName" [(ngModel)]="processName" />
            </div>
            <div class="activity-btn-css addProcessBtn">
              <button type="button" class="btn btn-icon btn-primary round" (click)="addProcess()"  ngbTooltip="Save Process" placement="left"
                [disabled]="!processName" rippleEffect><i class="size-18" data-feather="save" [size]="20"></i>
              </button>
              <button type="button" class="btn btn-icon  btn-danger round"  ngbTooltip="Delete Process" placement="left" (click)="deleteProcess(process)"
              [disabled]="!processName" rippleEffect><i class="plus" data-feather="x" [size]="20"></i>
            </button>
            </div>
          </div>
          <div class="form-group">
            <label>Sub-process</label>
            <input class="form-control" type="text"
              oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')" placeholder="Sub-process"
              name="subProcess" [(ngModel)]="subProcess"
              [class.error]="newProcessForm.submitted && FSubProcessRef.invalid" #FSubProcessRef="ngModel" required />
            <span *ngIf="newProcessForm.submitted && FSubProcessRef.invalid" class="invalid-form">
              <small class="form-text text-danger" *ngIf="FSubProcessRef.errors.required">This field is
                required!</small>
            </span>
          </div>
          <div class="position-relative process-activity-form">
            <label>Activity</label>
            <div class="d-flex position-relative">
              <div class="form-group">
                <input type="text" class="form-control"
                  oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')" placeholder="Activity"
                  name="Activity" [(ngModel)]="itemToAdd">
              </div>
              <div class="activity-btn-css">
                <button type="button" class="btn btn-icon btn-primary round" (click)="addItem(itemToAdd)" rippleEffect
                  [disabled]="!itemToAdd"><i class="size-18" data-feather="plus" [size]="20"></i>
                </button>
              </div>
            </div>
            <div class="d-flex position-relative" *ngFor="let activity of totalactivity; let i = index">
              <div class="form-group">
                <input type="text" class="form-control" disabled placeholder="Activity {{ i+1 }}" name="activity"
                  [(ngModel)]="activity.value" name="activity{{ i }}"
                  [class.error]="newProcessForm.submitted && FActivityRef.invalid" #FActivityRef="ngModel" required />
                <span *ngIf="newProcessForm.submitted && FActivityRef.invalid" class="invalid-form">
                  <small class="form-text text-danger" *ngIf="FActivityRef.errors.required">This field is
                    required!</small>
                </span>
              </div>
              <div class="activity-btn-css">
                <button type="button" class="btn btn-icon btn-danger round" (click)="deleteItem(i)" rippleEffect>
                  <i class="plus" data-feather="x" [size]="20"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>Estimated Hours</label>
            <input class="form-control" type="text" placeholder="00:00" mask="Hh:m0" name="estimatedHours"
              [(ngModel)]="estimatedHours" [class.error]="newProcessForm.submitted && FEstimatedHoursRef.invalid"
              #FEstimatedHoursRef="ngModel" required />
            <span *ngIf="(newProcessForm.submitted && FEstimatedHoursRef.invalid) || estimatedHours == 0" class="invalid-form">
              <small class="form-text text-danger"
                *ngIf="FEstimatedHoursRef.errors?.required && newProcessForm.submitted">This field is required!</small>
              <small class="form-text text-danger"
                *ngIf="estimatedHours == 0 && !FEstimatedHoursRef.errors?.required">Enter valid time</small>
            </span>
          </div>
          <div class="form-group">
            <div class="d-flex">
              <div class="custom-control custom-radio w-100">
                <input type="radio" id="customRadio1" name="checkProductive" [(ngModel)]="checkProductive"
                  (change)="radioChange($event)" value="Productive" class="custom-control-input" checked />
                <label class="custom-control-label" for="customRadio1">Productive</label>
              </div>
              <div class="custom-control custom-radio w-100">
                <input type="radio" id="customRadio2" name="checkProductive" #tradio1 (change)="radioChange($event)"
                  [(ngModel)]="checkProductive" value="Non-Productive" class="custom-control-input" />
                <label class="custom-control-label" for="customRadio2">Non-Productive</label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="d-flex">
              <div class="custom-control custom-radio w-100">
                <input type="radio" id="customRadio3" name="checkBill" [disabled]="tradio1.checked == true"
                  [(ngModel)]="checkBill" value="Billable" class="custom-control-input" checked />
                <label class="custom-control-label" for="customRadio3">Billable</label>
              </div>
              <div class="custom-control custom-radio w-100">
                <input type="radio" id="customRadio4" name="checkBill" [(ngModel)]="checkBill" value="Non-Billable"
                  class="custom-control-input" />
                <label class="custom-control-label" for="customRadio4">Non-Billable</label>
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary mr-1" (click)="submit(newProcessForm)" [disabled]="!process"
            rippleEffect>{{!isEdit ?
            'Add Process Now':'Update Process Now'}}</button>
        </div>
      </form>
    </div>
  </div>
</div>
<block-ui> </block-ui>